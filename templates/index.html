<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkShort | Master Designer</title>
    <meta name="description" content="Professional link management and QR code toolkit.">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <!-- Navbar -->
    <nav class="saas-navbar">
        <a href="/" class="nav-brand">Link<span>Short</span></a>
        <div class="nav-items">
            <a href="/" class="nav-item active">Link & QR Designer</a>
            <a href="/tools/utm-ab" class="nav-item">Marketing Toolkit</a>
            <a href="/blog" class="nav-item">Blog</a>
        </div>
    </nav>

    <div class="page-wrapper">

        <!-- Header -->
        <header style="margin-bottom: 2rem;">
            <h1 style="font-size: 1.75rem; margin-bottom: 0.5rem;">Master Designer</h1>
            <p style="color: var(--text-secondary); max-width: 600px;">Create shortened links and branded QR codes in
                bulk. Professional grade tools for marketers.</p>
        </header>

        <!-- Main Workspace -->
        <div class="saas-card">
            <!-- Toolbar -->
            <div class="saas-card-header">
                <div class="tab-switcher">
                    <button class="tab-btn active" onclick="switchTab('bulk')">Bulk Designer</button>
                    <button class="tab-btn" onclick="switchTab('single')">Single Link</button>
                </div>
                <div style="font-size: 0.8rem; color: var(--text-tertiary);">âœ¨ Auto-saving enabled</div>
            </div>

            <div class="saas-card-body">
                <div class="dashboard-grid">

                    <!-- LEFT: Configuration -->
                    <div class="config-panel">
                        <!-- File Upload -->
                        <div id="bulkContainer">
                            <label class="saas-label">Source Data</label>
                            <label for="fileInput" class="dropzone-minimal"
                                style="margin-bottom: 1.5rem; display: block;">
                                <div style="font-size: 1.25rem; margin-bottom: 0.5rem; opacity: 0.7;">ðŸ“‚</div>
                                <span style="font-weight: 500;">Drop CSV / Excel file here</span>
                                <div style="font-size: 0.8rem; color: var(--text-tertiary); margin-top: 0.25rem;">or
                                    click to browse</div>
                            </label>
                            <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" style="display:none;"
                                onchange="handleFileUpload(this)">
                            <div id="fileStatus" class="file-status"></div>

                            <label class="saas-label">Or Paste URLs</label>
                            <textarea id="urlInput" class="saas-textarea" rows="8"
                                placeholder="https://example.com/page1&#10;https://example.com/page2"
                                oninput="updateLivePreview()"></textarea>
                        </div>

                        <!-- Single Mode -->
                        <div id="singleContainer" class="hidden">
                            <div style="margin-bottom: 1.5rem;">
                                <label class="saas-label">Destination URL</label>
                                <input type="url" id="singleUrlInput" class="saas-input"
                                    placeholder="https://example.com/very-long-link..." oninput="updateLivePreview()">
                            </div>
                            <div>
                                <label class="saas-label">Custom Alias (Optional)</label>
                                <div style="display: flex; align-items: center;">
                                    <span
                                        style="color: var(--text-tertiary); font-size: 0.9rem; margin-right: 8px;">linkshort.live/</span>
                                    <input type="text" id="singleAliasInput" class="saas-input"
                                        placeholder="my-custom-link">
                                </div>
                            </div>
                        </div>

                        <!-- Bulk Aliases -->
                        <div style="margin-top: 1.5rem;">
                            <div style="font-size: 0.85rem; color: var(--accent-primary); cursor: pointer; font-weight: 500;"
                                onclick="toggleOptions()">+ Configure Aliases</div>
                            <div id="customOptions" class="hidden" style="margin-top: 0.75rem;">
                                <label class="saas-label">Custom Aliases (Comma separated)</label>
                                <input type="text" id="aliasInput" class="saas-input" placeholder="alias1, alias2">
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT: Preview & Settings -->
                    <div class="settings-panel">
                        <div
                            style="background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: var(--radius-lg); padding: 1.25rem;">
                            <label class="saas-label" style="margin-bottom: 1rem;">QR Appearance</label>

                            <!-- Preview Box -->
                            <div id="masterResultArea" class="hidden-initially" style="margin-bottom: 1.5rem;">
                                <div class="preview-box">
                                    <div id="liveQrContainer">
                                        <span style="color: #cbd5e1; font-size: 0.8rem;">Preview...</span>
                                    </div>
                                </div>
                                <div id="liveQrGreeting"
                                    style="text-align: center; margin-top: 0.5rem; font-weight: 600; font-size: 0.9rem; color: #333;">
                                </div>
                            </div>

                            <!-- Controls -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div>
                                    <label class="saas-label">Color</label>
                                    <input type="color" id="qrColor" value="#000000"
                                        style="width: 100%; height: 36px; cursor: pointer;"
                                        onchange="updateLivePreview()">
                                </div>
                                <div>
                                    <label class="saas-label">Background</label>
                                    <input type="color" id="qrBgColor" value="#ffffff"
                                        style="width: 100%; height: 36px; cursor: pointer;"
                                        onchange="updateLivePreview()">
                                </div>
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <label class="saas-label">Size</label>
                                <select id="qrSizeSelect" class="saas-select" onchange="updateLivePreview()">
                                    <option value="200">Small (200px)</option>
                                    <option value="300" selected>Medium (300px)</option>
                                    <option value="400">Large (400px)</option>
                                </select>
                            </div>
                            <div>
                                <label class="saas-label">Greeting Text</label>
                                <input type="text" id="qrGreetingInput" class="saas-input" placeholder="Scan Me!"
                                    oninput="updateLivePreview()">
                            </div>
                        </div>

                        <!-- Generate Action -->
                        <button id="shortenBtn" class="saas-btn saas-btn-primary" onclick="shortenUrl()"
                            style="width: 100%; margin-top: 1.5rem; height: 44px; font-weight: 600;">
                            Generate Links & QR
                        </button>
                    </div>

                </div>
            </div>

            <!-- Results Section (Hidden) -->
            <div id="resultArea" class="hidden"
                style="border-top: 1px solid var(--border-subtle); padding: 1.5rem; background: rgba(44, 167, 115, 0.05);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                    <h4 style="color: var(--success); font-size: 0.95rem;">ðŸŽ‰ Generation Complete</h4>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="saas-btn saas-btn-secondary" onclick="copyAllLinks()">Copy Links</button>
                        <button class="saas-btn saas-btn-secondary" onclick="downloadAllQRs()">Download ZIP</button>
                        <button class="saas-btn saas-btn-secondary" onclick="downloadResultsCSV()">Download CSV</button>
                    </div>
                </div>
                <div id="linksList" class="links-list" style="max-height: 200px; overflow-y: auto;"></div>
            </div>

            <!-- Progress -->
            <div id="bulkProgressContainer" class="hidden"
                style="padding: 1.5rem; border-top: 1px solid var(--border-subtle);">
                <div style="height: 4px; background: var(--border-subtle); border-radius: 2px; overflow: hidden;">
                    <div id="bulkProgressBar"
                        style="height: 100%; width: 0%; background: var(--accent-primary); transition: width 0.3s;">
                    </div>
                </div>
                <p id="bulkProgressText"
                    style="text-align: center; font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">
                    Processing...</p>
            </div>
            <div id="errorArea" class="error-message hidden"
                style="padding: 1rem; color: var(--error); text-align: center;"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="saas-footer">
        <div class="footer-links">
            <a href="/about-us">About</a>
            <a href="/contact">Contact</a>
            <a href="/privacy-policy">Privacy</a>
            <a href="/terms-of-service">Terms</a>
        </div>
        <p>&copy; 2026 LinkShort. Built for professionals.</p>
    </footer>

    <!-- QR Modal -->
    <div id="qrModal" class="hidden"
        style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; display: flex; align-items: center; justify-content: center;">
        <div class="saas-card" style="width: 400px; padding: 2rem; position: relative; text-align: center;">
            <button onclick="closeModal()"
                style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
            <h3 id="modalGreeting" style="margin-bottom: 1rem;"></h3>
            <div id="modalQrContent"
                style="background: white; padding: 1rem; border-radius: 8px; display: inline-block; margin-bottom: 1.5rem;">
            </div>
            <button id="modalDownloadBtn" class="saas-btn saas-btn-primary" style="width: 100%;">Download QR</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>